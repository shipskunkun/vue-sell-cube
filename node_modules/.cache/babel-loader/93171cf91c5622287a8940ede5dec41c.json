{"remainingRequest":"/Users/leeco/Documents/vue-sell-cube/node_modules/babel-loader/lib/index.js!/Users/leeco/Documents/vue-sell-cube/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/leeco/Documents/vue-sell-cube/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/leeco/Documents/vue-sell-cube/node_modules/cube-ui/src/components/tab-bar/tab-bar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/leeco/Documents/vue-sell-cube/node_modules/cube-ui/src/components/tab-bar/tab-bar.vue","mtime":499162500000},{"path":"/Users/leeco/Documents/vue-sell-cube/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/leeco/Documents/vue-sell-cube/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/leeco/Documents/vue-sell-cube/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/leeco/Documents/vue-sell-cube/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/leeco/Documents/vue-sell-cube/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/leeco/Documents/vue-sell-cube/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/leeco/Documents/vue-sell-cube/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/leeco/Documents/vue-sell-cube/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { prefixStyle } from '../../common/helpers/dom';\nimport { findIndex } from '../../common/helpers/util';\nimport CubeTab from './tab.vue';\nvar COMPONENT_NAME = 'cube-tab-bar';\nvar EVENT_INPUT = 'input';\nvar EVENT_CHANGE = 'change';\nvar EVENT_CLICK = 'click';\nvar TRANSFORM = prefixStyle('transform');\nvar TRANSITION = prefixStyle('transition');\nexport default {\n  name: COMPONENT_NAME,\n  components: {\n    CubeTab: CubeTab\n  },\n  props: {\n    value: {\n      type: [String, Number],\n      required: true\n    },\n    data: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    inline: {\n      type: Boolean,\n      default: false\n    },\n    showSlider: {\n      type: Boolean,\n      default: false\n    },\n    useTransition: {\n      type: Boolean,\n      default: true\n    }\n  },\n  watch: {\n    value: function value() {\n      this._updateSliderStyle();\n    }\n  },\n  created: function created() {\n    this.tabs = [];\n  },\n  mounted: function mounted() {\n    this._updateSliderStyle();\n\n    window.addEventListener('resize', this._resizeHandler);\n  },\n  activated: function activated() {\n    /* istanbul ignore next */\n    window.addEventListener('resize', this._resizeHandler);\n  },\n  deactivated: function deactivated() {\n    /* istanbul ignore next */\n    this._cleanUp();\n  },\n  beforeDestroy: function beforeDestroy() {\n    /* istanbul ignore next */\n    this._cleanUp();\n  },\n  methods: {\n    addTab: function addTab(tab) {\n      this.tabs.push(tab);\n    },\n    removeTab: function removeTab(tab) {\n      var index = this.tabs.indexOf(tab);\n      if (index > -1) this.tabs.splice(index, 1);\n    },\n    trigger: function trigger(value) {\n      var _this = this;\n\n      // emit click event as long as tab is clicked\n      this.$emit(EVENT_CLICK, value); // only when value changed, emit change & input event\n\n      if (value !== this.value) {\n        var changedEvents = [EVENT_INPUT, EVENT_CHANGE];\n        changedEvents.forEach(function (eventType) {\n          _this.$emit(eventType, value);\n        });\n      }\n    },\n    _updateSliderStyle: function _updateSliderStyle() {\n      var _this2 = this;\n\n      /* istanbul ignore if */\n      if (!this.showSlider) return;\n      var slider = this.$refs.slider;\n      this.$nextTick(function () {\n        var _this2$_getSliderWidt = _this2._getSliderWidthAndIndex(),\n            width = _this2$_getSliderWidt.width,\n            index = _this2$_getSliderWidt.index;\n\n        slider.style.width = \"\".concat(width, \"px\");\n\n        _this2.setSliderTransform(_this2._getOffsetLeft(index));\n      });\n    },\n    setSliderTransform: function setSliderTransform(offset) {\n      var slider = this.$refs.slider;\n\n      if (typeof offset === 'number') {\n        offset = \"\".concat(offset, \"px\");\n      }\n\n      if (slider) {\n        if (this.useTransition) slider.style[TRANSITION] = \"\".concat(TRANSFORM, \" 0.2s linear\");\n        slider.style[TRANSFORM] = \"translateX(\".concat(offset, \") translateZ(0)\");\n      }\n    },\n    _getSliderWidthAndIndex: function _getSliderWidthAndIndex() {\n      var _this3 = this;\n\n      var width = 0;\n      var index = 0;\n\n      if (this.tabs.length > 0) {\n        index = findIndex(this.tabs, function (tab) {\n          return tab.value === _this3.value;\n        });\n        width = this.tabs[index].$el.clientWidth;\n      }\n\n      return {\n        width: width,\n        index: index\n      };\n    },\n    _getOffsetLeft: function _getOffsetLeft(index) {\n      var offsetLeft = 0;\n      this.tabs.forEach(function (tab, i) {\n        if (i < index) offsetLeft += tab.$el.clientWidth;\n      });\n      return offsetLeft;\n    },\n    _resizeHandler: function _resizeHandler() {\n      var _this4 = this;\n\n      clearTimeout(this._resizeTimer);\n      this._resizeTimer = setTimeout(function () {\n        _this4._updateSliderStyle();\n      }, 60);\n    },\n    _cleanUp: function _cleanUp() {\n      clearTimeout(this._resizeTimer);\n      window.removeEventListener('resize', this._resizeHandler);\n    }\n  }\n};",{"version":3,"sources":["tab-bar.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"cube-tab-bar\" :class=\"{'cube-tab-bar_inline': inline}\">\n    <slot>\n      <cube-tab\n        v-for=\"(item, index) in data\"\n        :label=\"item.label\"\n        :value=\"item.value\"\n        :icon=\"item.icon\"\n        :key=\"item.value || item.label\">\n      </cube-tab>\n    </slot>\n    <div v-if=\"showSlider\" ref=\"slider\" class=\"cube-tab-bar-slider\"></div>\n  </div>\n</template>\n<script type=\"text/ecmascript-6\">\n  import { prefixStyle } from '../../common/helpers/dom'\n  import { findIndex } from '../../common/helpers/util'\n  import CubeTab from './tab.vue'\n\n  const COMPONENT_NAME = 'cube-tab-bar'\n\n  const EVENT_INPUT = 'input'\n  const EVENT_CHANGE = 'change'\n  const EVENT_CLICK = 'click'\n\n  const TRANSFORM = prefixStyle('transform')\n  const TRANSITION = prefixStyle('transition')\n\n  export default {\n    name: COMPONENT_NAME,\n    components: {\n      CubeTab\n    },\n    props: {\n      value: {\n        type: [String, Number],\n        required: true\n      },\n      data: {\n        type: Array,\n        default () {\n          return []\n        }\n      },\n      inline: {\n        type: Boolean,\n        default: false\n      },\n      showSlider: {\n        type: Boolean,\n        default: false\n      },\n      useTransition: {\n        type: Boolean,\n        default: true\n      }\n    },\n    watch: {\n      value () {\n        this._updateSliderStyle()\n      }\n    },\n    created () {\n      this.tabs = []\n    },\n    mounted () {\n      this._updateSliderStyle()\n      window.addEventListener('resize', this._resizeHandler)\n    },\n    activated() {\n      /* istanbul ignore next */\n      window.addEventListener('resize', this._resizeHandler)\n    },\n    deactivated() {\n      /* istanbul ignore next */\n      this._cleanUp()\n    },\n    beforeDestroy () {\n      /* istanbul ignore next */\n      this._cleanUp()\n    },\n    methods: {\n      addTab (tab) {\n        this.tabs.push(tab)\n      },\n      removeTab (tab) {\n        const index = this.tabs.indexOf(tab)\n        if (index > -1) this.tabs.splice(index, 1)\n      },\n      trigger (value) {\n        // emit click event as long as tab is clicked\n        this.$emit(EVENT_CLICK, value)\n        // only when value changed, emit change & input event\n        if (value !== this.value) {\n          const changedEvents = [EVENT_INPUT, EVENT_CHANGE]\n          changedEvents.forEach((eventType) => {\n            this.$emit(eventType, value)\n          })\n        }\n      },\n      _updateSliderStyle () {\n        /* istanbul ignore if */\n        if (!this.showSlider) return\n        const slider = this.$refs.slider\n        this.$nextTick(() => {\n          const { width, index } = this._getSliderWidthAndIndex()\n          slider.style.width = `${width}px`\n          this.setSliderTransform(this._getOffsetLeft(index))\n        })\n      },\n      setSliderTransform (offset) {\n        const slider = this.$refs.slider\n        if (typeof offset === 'number') {\n          offset = `${offset}px`\n        }\n        if (slider) {\n          if (this.useTransition) slider.style[TRANSITION] = `${TRANSFORM} 0.2s linear`\n          slider.style[TRANSFORM] = `translateX(${offset}) translateZ(0)`\n        }\n      },\n      _getSliderWidthAndIndex () {\n        let width = 0\n        let index = 0\n        if (this.tabs.length > 0) {\n          index = findIndex(this.tabs, (tab) => tab.value === this.value)\n          width = this.tabs[index].$el.clientWidth\n        }\n        return {\n          width,\n          index\n        }\n      },\n      _getOffsetLeft (index) {\n        let offsetLeft = 0\n        this.tabs.forEach((tab, i) => {\n          if (i < index) offsetLeft += tab.$el.clientWidth\n        })\n        return offsetLeft\n      },\n      _resizeHandler () {\n        clearTimeout(this._resizeTimer)\n        this._resizeTimer = setTimeout(() => {\n          this._updateSliderStyle()\n        }, 60)\n      },\n      _cleanUp () {\n        clearTimeout(this._resizeTimer)\n        window.removeEventListener('resize', this._resizeHandler)\n      }\n    }\n  }\n</script>\n<style lang=\"stylus\" rel=\"stylesheet/stylus\">\n  @require \"../../common/stylus/variable.styl\"\n\n  .cube-tab-bar\n    position: relative\n    display: flex\n    align-items: center\n    justify-content: center\n\n  .cube-tab-bar_inline\n    .cube-tab\n      display: flex\n      align-content: center\n      justify-content: center\n\n  .cube-tab-bar-slider\n    position: absolute\n    left: 0\n    bottom: 0\n    height: 2px\n    width: 20px\n    background-color: $tab-slider-bgc\n</style>\n"],"sourceRoot":"node_modules/cube-ui/src/components/tab-bar"}]}