{"remainingRequest":"/Users/leeco/Documents/vue-sell-cube/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/leeco/Documents/vue-sell-cube/node_modules/cube-ui/src/components/tab-bar/tab-bar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/leeco/Documents/vue-sell-cube/node_modules/cube-ui/src/components/tab-bar/tab-bar.vue","mtime":499162500000},{"path":"/Users/leeco/Documents/vue-sell-cube/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/leeco/Documents/vue-sell-cube/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/leeco/Documents/vue-sell-cube/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/leeco/Documents/vue-sell-cube/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/leeco/Documents/vue-sell-cube/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { prefixStyle } from '../../common/helpers/dom'\nimport { findIndex } from '../../common/helpers/util'\nimport CubeTab from './tab.vue'\n\nconst COMPONENT_NAME = 'cube-tab-bar'\n\nconst EVENT_INPUT = 'input'\nconst EVENT_CHANGE = 'change'\nconst EVENT_CLICK = 'click'\n\nconst TRANSFORM = prefixStyle('transform')\nconst TRANSITION = prefixStyle('transition')\n\nexport default {\n  name: COMPONENT_NAME,\n  components: {\n    CubeTab\n  },\n  props: {\n    value: {\n      type: [String, Number],\n      required: true\n    },\n    data: {\n      type: Array,\n      default () {\n        return []\n      }\n    },\n    inline: {\n      type: Boolean,\n      default: false\n    },\n    showSlider: {\n      type: Boolean,\n      default: false\n    },\n    useTransition: {\n      type: Boolean,\n      default: true\n    }\n  },\n  watch: {\n    value () {\n      this._updateSliderStyle()\n    }\n  },\n  created () {\n    this.tabs = []\n  },\n  mounted () {\n    this._updateSliderStyle()\n    window.addEventListener('resize', this._resizeHandler)\n  },\n  activated() {\n    /* istanbul ignore next */\n    window.addEventListener('resize', this._resizeHandler)\n  },\n  deactivated() {\n    /* istanbul ignore next */\n    this._cleanUp()\n  },\n  beforeDestroy () {\n    /* istanbul ignore next */\n    this._cleanUp()\n  },\n  methods: {\n    addTab (tab) {\n      this.tabs.push(tab)\n    },\n    removeTab (tab) {\n      const index = this.tabs.indexOf(tab)\n      if (index > -1) this.tabs.splice(index, 1)\n    },\n    trigger (value) {\n      // emit click event as long as tab is clicked\n      this.$emit(EVENT_CLICK, value)\n      // only when value changed, emit change & input event\n      if (value !== this.value) {\n        const changedEvents = [EVENT_INPUT, EVENT_CHANGE]\n        changedEvents.forEach((eventType) => {\n          this.$emit(eventType, value)\n        })\n      }\n    },\n    _updateSliderStyle () {\n      /* istanbul ignore if */\n      if (!this.showSlider) return\n      const slider = this.$refs.slider\n      this.$nextTick(() => {\n        const { width, index } = this._getSliderWidthAndIndex()\n        slider.style.width = `${width}px`\n        this.setSliderTransform(this._getOffsetLeft(index))\n      })\n    },\n    setSliderTransform (offset) {\n      const slider = this.$refs.slider\n      if (typeof offset === 'number') {\n        offset = `${offset}px`\n      }\n      if (slider) {\n        if (this.useTransition) slider.style[TRANSITION] = `${TRANSFORM} 0.2s linear`\n        slider.style[TRANSFORM] = `translateX(${offset}) translateZ(0)`\n      }\n    },\n    _getSliderWidthAndIndex () {\n      let width = 0\n      let index = 0\n      if (this.tabs.length > 0) {\n        index = findIndex(this.tabs, (tab) => tab.value === this.value)\n        width = this.tabs[index].$el.clientWidth\n      }\n      return {\n        width,\n        index\n      }\n    },\n    _getOffsetLeft (index) {\n      let offsetLeft = 0\n      this.tabs.forEach((tab, i) => {\n        if (i < index) offsetLeft += tab.$el.clientWidth\n      })\n      return offsetLeft\n    },\n    _resizeHandler () {\n      clearTimeout(this._resizeTimer)\n      this._resizeTimer = setTimeout(() => {\n        this._updateSliderStyle()\n      }, 60)\n    },\n    _cleanUp () {\n      clearTimeout(this._resizeTimer)\n      window.removeEventListener('resize', this._resizeHandler)\n    }\n  }\n}\n",{"version":3,"sources":["tab-bar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"tab-bar.vue","sourceRoot":"node_modules/cube-ui/src/components/tab-bar","sourcesContent":["<template>\n  <div class=\"cube-tab-bar\" :class=\"{'cube-tab-bar_inline': inline}\">\n    <slot>\n      <cube-tab\n        v-for=\"(item, index) in data\"\n        :label=\"item.label\"\n        :value=\"item.value\"\n        :icon=\"item.icon\"\n        :key=\"item.value || item.label\">\n      </cube-tab>\n    </slot>\n    <div v-if=\"showSlider\" ref=\"slider\" class=\"cube-tab-bar-slider\"></div>\n  </div>\n</template>\n<script type=\"text/ecmascript-6\">\n  import { prefixStyle } from '../../common/helpers/dom'\n  import { findIndex } from '../../common/helpers/util'\n  import CubeTab from './tab.vue'\n\n  const COMPONENT_NAME = 'cube-tab-bar'\n\n  const EVENT_INPUT = 'input'\n  const EVENT_CHANGE = 'change'\n  const EVENT_CLICK = 'click'\n\n  const TRANSFORM = prefixStyle('transform')\n  const TRANSITION = prefixStyle('transition')\n\n  export default {\n    name: COMPONENT_NAME,\n    components: {\n      CubeTab\n    },\n    props: {\n      value: {\n        type: [String, Number],\n        required: true\n      },\n      data: {\n        type: Array,\n        default () {\n          return []\n        }\n      },\n      inline: {\n        type: Boolean,\n        default: false\n      },\n      showSlider: {\n        type: Boolean,\n        default: false\n      },\n      useTransition: {\n        type: Boolean,\n        default: true\n      }\n    },\n    watch: {\n      value () {\n        this._updateSliderStyle()\n      }\n    },\n    created () {\n      this.tabs = []\n    },\n    mounted () {\n      this._updateSliderStyle()\n      window.addEventListener('resize', this._resizeHandler)\n    },\n    activated() {\n      /* istanbul ignore next */\n      window.addEventListener('resize', this._resizeHandler)\n    },\n    deactivated() {\n      /* istanbul ignore next */\n      this._cleanUp()\n    },\n    beforeDestroy () {\n      /* istanbul ignore next */\n      this._cleanUp()\n    },\n    methods: {\n      addTab (tab) {\n        this.tabs.push(tab)\n      },\n      removeTab (tab) {\n        const index = this.tabs.indexOf(tab)\n        if (index > -1) this.tabs.splice(index, 1)\n      },\n      trigger (value) {\n        // emit click event as long as tab is clicked\n        this.$emit(EVENT_CLICK, value)\n        // only when value changed, emit change & input event\n        if (value !== this.value) {\n          const changedEvents = [EVENT_INPUT, EVENT_CHANGE]\n          changedEvents.forEach((eventType) => {\n            this.$emit(eventType, value)\n          })\n        }\n      },\n      _updateSliderStyle () {\n        /* istanbul ignore if */\n        if (!this.showSlider) return\n        const slider = this.$refs.slider\n        this.$nextTick(() => {\n          const { width, index } = this._getSliderWidthAndIndex()\n          slider.style.width = `${width}px`\n          this.setSliderTransform(this._getOffsetLeft(index))\n        })\n      },\n      setSliderTransform (offset) {\n        const slider = this.$refs.slider\n        if (typeof offset === 'number') {\n          offset = `${offset}px`\n        }\n        if (slider) {\n          if (this.useTransition) slider.style[TRANSITION] = `${TRANSFORM} 0.2s linear`\n          slider.style[TRANSFORM] = `translateX(${offset}) translateZ(0)`\n        }\n      },\n      _getSliderWidthAndIndex () {\n        let width = 0\n        let index = 0\n        if (this.tabs.length > 0) {\n          index = findIndex(this.tabs, (tab) => tab.value === this.value)\n          width = this.tabs[index].$el.clientWidth\n        }\n        return {\n          width,\n          index\n        }\n      },\n      _getOffsetLeft (index) {\n        let offsetLeft = 0\n        this.tabs.forEach((tab, i) => {\n          if (i < index) offsetLeft += tab.$el.clientWidth\n        })\n        return offsetLeft\n      },\n      _resizeHandler () {\n        clearTimeout(this._resizeTimer)\n        this._resizeTimer = setTimeout(() => {\n          this._updateSliderStyle()\n        }, 60)\n      },\n      _cleanUp () {\n        clearTimeout(this._resizeTimer)\n        window.removeEventListener('resize', this._resizeHandler)\n      }\n    }\n  }\n</script>\n<style lang=\"stylus\" rel=\"stylesheet/stylus\">\n  @require \"../../common/stylus/variable.styl\"\n\n  .cube-tab-bar\n    position: relative\n    display: flex\n    align-items: center\n    justify-content: center\n\n  .cube-tab-bar_inline\n    .cube-tab\n      display: flex\n      align-content: center\n      justify-content: center\n\n  .cube-tab-bar-slider\n    position: absolute\n    left: 0\n    bottom: 0\n    height: 2px\n    width: 20px\n    background-color: $tab-slider-bgc\n</style>\n"]}]}